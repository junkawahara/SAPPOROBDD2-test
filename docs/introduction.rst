はじめに
========

SAPPOROBDD 2.0とは
------------------

SAPPOROBDD 2.0は、SAPPOROBDD++をベースに設計された新しい決定図（Decision Diagram）ライブラリです。
BDD（Binary Decision Diagram）とZDD（Zero-suppressed Decision Diagram）を効率的に操作するための
高性能なC++ライブラリを提供します。

決定図について
--------------

BDD（二分決定図）
~~~~~~~~~~~~~~~~~

BDDは、ブール関数を効率的に表現するデータ構造です。
各内部ノードは変数に対応し、0枝と1枝の2つの子を持ちます。

縮約BDDは以下の規則を満たします：

1. **ノード共有**: 等価なサブグラフは共有される
2. **冗長ノードの除去**: 0枝と1枝が同じノードを指す場合、そのノードは除去される

ZDD（ゼロ抑制二分決定図）
~~~~~~~~~~~~~~~~~~~~~~~~~

ZDDは、集合族（集合の集合）を効率的に表現するデータ構造です。
BDDとは異なる縮約規則を使用します：

1. **ノード共有**: 等価なサブグラフは共有される
2. **ゼロ抑制**: 1枝が終端0を指すノードは除去される

この縮約規則により、ZDDは疎な集合族を効率的に表現できます。

ライブラリの特徴
----------------

128ビットノード構造
~~~~~~~~~~~~~~~~~~~

各ノードは128ビット（16バイト）で構成されています：

* **0-arc**: 44ビット（否定フラグ1ビット、定数フラグ1ビット、インデックス42ビット）
* **1-arc**: 44ビット（同上）
* **既約フラグ**: 1ビット
* **参照カウンタ**: 16ビット（飽和値65535）
* **変数番号**: 20ビット（最大約100万変数）

内部ハッシュ法
~~~~~~~~~~~~~~

ノードテーブルは内部ハッシュ法（二次探索）を使用します。
従来の外部連鎖法と比較して、キャッシュ効率が向上しています。

否定枝表現
~~~~~~~~~~

BDDでは否定枝表現を採用しています。
これにより、NOT演算がO(1)で実行可能になります。

スレッドセーフティ
~~~~~~~~~~~~~~~~~~

内部でmutexを使用し、マルチスレッド環境での安全な操作を保証します。

TdZdd互換インターフェース
~~~~~~~~~~~~~~~~~~~~~~~~~

TdZdd（岩下博明氏開発のフロンティア法ライブラリ）と互換性のある
Specインターフェースを提供します。既存のTdZdd用Specクラスを
そのまま使用してBDD/ZDDを構築できます。

並列ビルダー（OpenMP）もサポートしています。

厳密カウント（GMP）
~~~~~~~~~~~~~~~~~~~

GMPライブラリがインストールされている場合、``exact_count()`` メソッドで
任意精度の厳密なカウントが可能です。double精度（2^53）を超える
大規模な集合族でも正確なカウントを取得できます。
